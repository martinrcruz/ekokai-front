<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>Configuración del Sistema</ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="guardarConfiguracion()">
        <ion-icon name="save-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <div class="configuracion-container">
    <!-- Configuración General -->
    <ion-card>
      <ion-card-header>
        <ion-card-title>
          <ion-icon name="settings-outline"></ion-icon>
          Configuración General
        </ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <ion-item>
          <ion-label position="stacked">Nombre de la Empresa</ion-label>
          <ion-input [(ngModel)]="configuracion.general.nombreEmpresa" placeholder="Ekokai"></ion-input>
        </ion-item>
        <ion-item>
          <ion-label position="stacked">Email de Contacto</ion-label>
          <ion-input [(ngModel)]="configuracion.general.emailContacto" type="email" placeholder="contacto@ekokai.com"></ion-input>
        </ion-item>
        <ion-item>
          <ion-label position="stacked">Teléfono</ion-label>
          <ion-input [(ngModel)]="configuracion.general.telefono" placeholder="+34 123 456 789"></ion-input>
        </ion-item>
        <ion-item>
          <ion-label position="stacked">Dirección</ion-label>
          <ion-input [(ngModel)]="configuracion.general.direccion" placeholder="Calle Principal 123, Madrid"></ion-input>
        </ion-item>
      </ion-card-content>
    </ion-card>

    <!-- Configuración de Tokens -->
    <ion-card>
      <ion-card-header>
        <ion-card-title>
          <ion-icon name="star-outline"></ion-icon>
          Configuración de Tokens
        </ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <ion-item>
          <ion-label position="stacked">Tokens por Kilo</ion-label>
          <ion-input [(ngModel)]="configuracion.tokens.tokensPorKilo" type="number" placeholder="10"></ion-input>
        </ion-item>
        <ion-item>
          <ion-label position="stacked">Tokens Mínimos para Retiro</ion-label>
          <ion-input [(ngModel)]="configuracion.tokens.tokensMinimosRetiro" type="number" placeholder="100"></ion-input>
        </ion-item>
        <ion-item>
          <ion-label position="stacked">Máximo Tokens por Día</ion-label>
          <ion-input [(ngModel)]="configuracion.tokens.maxTokensPorDia" type="number" placeholder="500"></ion-input>
        </ion-item>
      </ion-card-content>
    </ion-card>

    <!-- Configuración de Notificaciones -->
    <ion-card>
      <ion-card-header>
        <ion-card-title>
          <ion-icon name="notifications-outline"></ion-icon>
          Notificaciones
        </ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <ion-item>
          <ion-label>Notificaciones por Email</ion-label>
          <ion-toggle [(ngModel)]="configuracion.notificaciones.emailActivo"></ion-toggle>
        </ion-item>
        <ion-item>
          <ion-label>Notificaciones Push</ion-label>
          <ion-toggle [(ngModel)]="configuracion.notificaciones.pushActivo"></ion-toggle>
        </ion-item>
        <ion-item>
          <ion-label>Recordatorios</ion-label>
          <ion-toggle [(ngModel)]="configuracion.notificaciones.recordatorios"></ion-toggle>
        </ion-item>
        <ion-item>
          <ion-label>Reportes Automáticos</ion-label>
          <ion-toggle [(ngModel)]="configuracion.notificaciones.reportes"></ion-toggle>
        </ion-item>
      </ion-card-content>
    </ion-card>

    <!-- Configuración de Seguridad -->
    <ion-card>
      <ion-card-header>
        <ion-card-title>
          <ion-icon name="shield-outline"></ion-icon>
          Seguridad
        </ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <ion-item>
          <ion-label position="stacked">Timeout de Sesión (minutos)</ion-label>
          <ion-input [(ngModel)]="configuracion.seguridad.sesionTimeout" type="number" placeholder="30"></ion-input>
        </ion-item>
        <ion-item>
          <ion-label position="stacked">Intentos Máximos de Login</ion-label>
          <ion-input [(ngModel)]="configuracion.seguridad.intentosMaximos" type="number" placeholder="3"></ion-input>
        </ion-item>
        <ion-item>
          <ion-label position="stacked">Longitud Mínima de Contraseña</ion-label>
          <ion-input [(ngModel)]="configuracion.seguridad.passwordMinLength" type="number" placeholder="8"></ion-input>
        </ion-item>
        <ion-item>
          <ion-label>Requerir Mayúsculas</ion-label>
          <ion-toggle [(ngModel)]="configuracion.seguridad.requiereMayusculas"></ion-toggle>
        </ion-item>
        <ion-item>
          <ion-label>Requerir Números</ion-label>
          <ion-toggle [(ngModel)]="configuracion.seguridad.requiereNumeros"></ion-toggle>
        </ion-item>
      </ion-card-content>
    </ion-card>

    <!-- Configuración de Ecopuntos -->
    <ion-card>
      <ion-card-header>
        <ion-card-title>
          <ion-icon name="location-outline"></ion-icon>
          Configuración de Ecopuntos
        </ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <ion-item>
          <ion-label position="stacked">Radio Máximo (km)</ion-label>
          <ion-input [(ngModel)]="configuracion.ecopuntos.radioMaximo" type="number" placeholder="5"></ion-input>
        </ion-item>
        <ion-item>
          <ion-label position="stacked">Horario de Apertura</ion-label>
          <ion-input [(ngModel)]="configuracion.ecopuntos.horarioApertura" type="time"></ion-input>
        </ion-item>
        <ion-item>
          <ion-label position="stacked">Horario de Cierre</ion-label>
          <ion-input [(ngModel)]="configuracion.ecopuntos.horarioCierre" type="time"></ion-input>
        </ion-item>
        <ion-item>
          <ion-label position="stacked">Máximo Usuarios por Ecopunto</ion-label>
          <ion-input [(ngModel)]="configuracion.ecopuntos.maxUsuariosPorEcopunto" type="number" placeholder="100"></ion-input>
        </ion-item>
      </ion-card-content>
    </ion-card>

    <!-- Acciones del Sistema -->
    <ion-card>
      <ion-card-header>
        <ion-card-title>
          <ion-icon name="construct-outline"></ion-icon>
          Acciones del Sistema
        </ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <div class="actions-grid">
          <ion-button expand="block" fill="outline" (click)="exportarConfiguracion()">
            <ion-icon name="download-outline"></ion-icon>
            Exportar Configuración
          </ion-button>
          <ion-button expand="block" fill="outline" (click)="importarConfiguracion()">
            <ion-icon name="upload-outline"></ion-icon>
            Importar Configuración
          </ion-button>
          <ion-button expand="block" fill="outline" (click)="generarBackup()">
            <ion-icon name="save-outline"></ion-icon>
            Generar Backup
          </ion-button>
          <ion-button expand="block" fill="outline" (click)="restaurarBackup()">
            <ion-icon name="refresh-outline"></ion-icon>
            Restaurar Backup
          </ion-button>
          <ion-button expand="block" fill="outline" color="warning" (click)="resetearConfiguracion()">
            <ion-icon name="refresh-circle-outline"></ion-icon>
            Resetear Configuración
          </ion-button>
        </div>
      </ion-card-content>
    </ion-card>
  </div>
</ion-content> 